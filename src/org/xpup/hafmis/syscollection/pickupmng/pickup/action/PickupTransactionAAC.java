/*
 * Generated by MyEclipse Struts
 * Template path: templates/java/JavaClass.vtl
 */
package org.xpup.hafmis.syscollection.pickupmng.pickup.action;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts.action.Action;
import org.apache.struts.action.ActionForm;
import org.apache.struts.action.ActionForward;
import org.apache.struts.action.ActionMapping;
import org.xpup.common.util.BSUtils;
import org.xpup.common.util.Pagination;
import org.xpup.hafmis.orgstrct.dto.SecurityInfo;
import org.xpup.hafmis.syscollection.pickupmng.pickup.bsinterface.IPickupBS;


/** 
 * MyEclipse Struts
 * Creation date: 06-28-2007
 * 李文浩 
 * XDoclet definition:
 * @struts.action path="/pickupTransactionAAC" name="pickupMaintainAF" scope="request" validate="true"
 */
public class PickupTransactionAAC extends Action {
	public ActionForward execute(ActionMapping mapping, ActionForm form,
			HttpServletRequest request, HttpServletResponse response) throws Exception{
    try{
      response.setContentType("text/html;charset=UTF-8");
      response.setHeader("Cache-Control", "no-cache");
      String id = "";
      id = (String)request.getParameter("id");
      IPickupBS pbs = (IPickupBS)BSUtils.getBusinessService("pickupBS",this,mapping.getModuleConfig());
      Pagination pag = (Pagination)request.getSession().getAttribute(PickupShowAC.PAGINACTION_KEY);
      SecurityInfo sInfo = (SecurityInfo)request.getSession().getAttribute("SecurityInfo");
      String f="";
      String f1="";
      boolean flag1=false;
      boolean flag2=false;
      flag1=pbs.check(id, sInfo);//错账
      flag2=pbs.checkTranOut(id);//转出
      if(flag1)
      { 
        f = "提示";//错账
      }
      if(flag2)
      { 
        f1 = "提示";//转出
      }
      pag.getQueryCriterions().put("idValue", id);//这个地方不能放在if语句里
      String text="displays('"+f+"','"+f1+"')";
      response.getWriter().write(text);
      response.getWriter().close();
    }catch(Exception e){
      e.printStackTrace();  
    }
		return null;
	}
}